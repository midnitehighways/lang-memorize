{% extends 'sanat/base.html' %}
{% block test %}

<div class="content">
	<div class="text-content">
		
		<script>
			var words_list = {{ words_list | safe }};				// array of the words passed by means of json serialization
			var maara = words_list.length;
			var fin = [];
			var eng = [];
			for(var i = 0; i < maara; i++) {
				fin.push(words_list[i].fields.fi);
				eng.push(words_list[i].fields.en);
			}

        function yritys2()
        {
            var numerot = [];
            for (var i = 0; i < 4; i++) {										// create array numerot[] and populate it with 4 random numbers
                numerot[i] = Math.floor(Math.random( ) * (maara));				// generate random number less than 'maara'
                for (var j = i; j > 0; j--) {
                    if (numerot[i] == numerot[j-1]) {							// thus we avoid the same numbers in the array
                        numerot[i] = Math.floor(Math.random( ) * (maara));
                        i--;
                        break;
                    }
                }
            }
            var rand = Math.floor(Math.random( ) * 4);
            console.log(" num " + numerot[0] + " " + numerot[1] + " " + numerot[2] + " " + numerot[3]);
            console.log(" eng " + eng[numerot[0]] + " " + eng[numerot[1]] + " " + eng[numerot[2]] + " " + eng[numerot[3]]);
            console.log(" fin " + fin[numerot[0]] + " " + fin[numerot[1]] + " " + fin[numerot[2]] + " " + fin[numerot[3]]);
            console.log(rand);
            document.getElementById('yritys_en').value = eng[numerot[rand]];
            oikea_vastaus = fin[numerot[rand]];						// oikea_vastaus - the right answer (text)
            valinnat = [document.getElementById('yritys_1'), document.getElementById('yritys_2'), document.getElementById('yritys_3'), document.getElementById('yritys_4')];
            // for (var i = numerot.length - 1; i > 0; i--) {				// shuffling the numerot-array
            //     var j = Math.floor(Math.random() * (i + 1));
            //     var temp = numerot[i];
            //     numerot[i] = numerot[j];
            //     numerot[j] = temp;
            // }
            for (var i = 0; i < 4; i++) {
                valinnat[i].value = fin[numerot[i]];
            }
            $("#yritys_en").show("600");
            $("#suomea").show("600");
        } 
        
        window.onload = function() { yritys2();};        
        
        function koe(vastaus)
        {
            document.getElementById('yritys_en').style.display = "none";
            if(vastaus == oikea_vastaus) {
                document.getElementById('tulos').innerHTML = "joo";//"Vastasit oikein!";
                document.getElementById('tulos').className = "joo";
            }
            else {
                document.getElementById('tulos').innerHTML = "ei";//"Oikea vastaus on " + oikea_vastaus;
                document.getElementById('tulos').className = "ei";
            }
            $("#suomea").hide(600);
            yritys2();
        }
        </script>

		<input style = "margin-top: 110px;" type = "button"; class = "button2"; id = "yritys_en" /></br>
        <span id="tulos" style="bottom: -100px; position: relative; margin-left: 160px;"> </span>
        <div id="suomea" style="margin-left: 330px; margin-top: -170px">
	        <input type = "button" class = "nappi" onclick="koe(this.value)" id = "yritys_1" /></br>
	        <input type = "button" class = "nappi" onclick="koe(this.value)" id = "yritys_2" /></br>
	        <input type = "button" class = "nappi" onclick="koe(this.value)" id = "yritys_3" /></br>
	        <input type = "button" class = "nappi" onclick="koe(this.value)" id = "yritys_4" /></br>
        </div>
    </div>
</div>
{% endblock test %}